<?xml version="1.0"?>
<DDDefinition xmlns="http://www.cern.ch/cms/DDL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.cern.ch/cms/DDL ../../../DetectorDescription/Schema/DDLSchema.xsd">

<ConstantsSection label="pixfwdInnerDiskSupportRings.xml" eval="true">
  <Constant name="InnerRingRMax"        value="39.35*mm"/>
  <Constant name="InnerRingRMin"        value="[InnerRingRMax]-2.5*mm"/> <!-- according to stp file -->
  <Constant name="InnerRingCFRMax"        value="[InnerRingRMin]"/>
  <Constant name="InnerRingCFRMin"        value="[InnerRingCFRMax]-0.5*mm"/>
  <Constant name="InnerRingSegmentHalfWidth"   value="16*mm"/>
  <Constant name="InnerRingHalfWidth"   value="[InnerRingSegmentHalfWidth] + (15.0*mm/2.0)"/><!-- max offset from Algorithm -->
  <Constant name="InnerRingZ"           value="[pixfwdDisks:DiskHalfWidth]-[InnerRingHalfWidth] - 21.0*mm"/>

  <Constant name="OuterRingRMin"        value="114.85*mm"/> <!-- according to stp file -->
  <Constant name="OuterRingRMax"        value="[OuterRingRMin]+2.50*mm"/>
  <Constant name="OuterRingCFRMin"        value="[OuterRingRMax]"/>
  <Constant name="OuterRingCFRMax"        value="[OuterRingCFRMin]+0.5*mm"/>

  <Constant name="OuterRingSegmentHalfWidth" value="11*mm"/>
  <Constant name="OuterRingHalfWidth"   value="[OuterRingSegmentHalfWidth] + (18.388*mm/2.0)"/><!-- max offset from Algorithm -->
  <Constant name="OuterRingZ"           value="[pixfwdDisks:DiskHalfWidth]-[OuterRingHalfWidth]"/>

  <Constant name="InnerRingPhiStart"     value=" 33.862*deg"/><!-- same as in Algorithm -->
  <Constant name="InnerRingPhiEnd"       value="154.862*deg"/><!-- same as in Algorithm -->
  <Constant name="InnerRingTubsCount"    value="20" />
  <Constant name="InnerRingSegmentDPhi"  value="([InnerRingPhiEnd]-[InnerRingPhiStart])/[InnerRingTubsCount]" />

  <Constant name="OuterRingPhiStart"     value="  5.0*deg"/><!-- same as in Algorithm -->
  <Constant name="OuterRingPhiEnd"       value="175.0*deg"/><!-- same as in Algorithm -->
  <Constant name="OuterRingTubsCount"    value="40" />
  <Constant name="OuterRingSegmentDPhi"  value="([OuterRingPhiEnd]-[OuterRingPhiStart])/[OuterRingTubsCount]" />

</ConstantsSection>
 

<SolidSection label="pixfwdInnerDiskSupportRings.xml">
  <Tubs name="PixelForwardInnerDiskInnerRing"  startPhi="0." deltaPhi="360*deg"
   rMin="[InnerRingCFRMin]" rMax="[InnerRingRMax]" dz="[InnerRingHalfWidth]"/>

  <Tubs name="PixelForwardInnerDiskOuterRing"  startPhi="0." deltaPhi="360*deg"
   rMin="[OuterRingRMin]" rMax="[OuterRingCFRMax]" dz="[OuterRingHalfWidth]" />

  <Tubs name="PixelForwardInnerDiskInnerRingSegment"  startPhi="-[InnerRingSegmentDPhi]/2.0" deltaPhi="[InnerRingSegmentDPhi]"
        rMin="[InnerRingRMin]" rMax="[InnerRingRMax]" dz="[InnerRingSegmentHalfWidth]"/>
  <Tubs name="PixelForwardInnerDiskInnerRingCFSegment"  startPhi="-[InnerRingSegmentDPhi]/2.0" deltaPhi="[InnerRingSegmentDPhi]"
        rMin="[InnerRingCFRMin]" rMax="[InnerRingCFRMax]" dz="[InnerRingSegmentHalfWidth]"/>

  <Tubs name="PixelForwardInnerDiskOuterRingSegment"  startPhi="-[OuterRingSegmentDPhi]/2.0" deltaPhi="[OuterRingSegmentDPhi]"
        rMin="[OuterRingRMin]" rMax="[OuterRingRMax]" dz="[OuterRingSegmentHalfWidth]"/>
  <Tubs name="PixelForwardInnerDiskOuterRingCFSegment"  startPhi="-[OuterRingSegmentDPhi]/2.0" deltaPhi="[OuterRingSegmentDPhi]"
        rMin="[OuterRingCFRMin]" rMax="[OuterRingCFRMax]" dz="[OuterRingSegmentHalfWidth]"/>
</SolidSection>
 
<LogicalPartSection label="pixfwdInnerDiskSupportRings.xml">
 <LogicalPart name="PixelForwardInnerDiskInnerRing" category="envelope">
  <rSolid name="PixelForwardInnerDiskInnerRing"/>
  <rMaterial name="materials:Air"/>
 </LogicalPart>
  
 <LogicalPart name="PixelForwardInnerDiskOuterRing" category="envelope">
  <rSolid name="PixelForwardInnerDiskOuterRing"/>
  <rMaterial name="materials:Air"/>
 </LogicalPart>


 <LogicalPart name="PixelForwardInnerDiskInnerRingSegment" category="support">
  <rSolid name="PixelForwardInnerDiskInnerRingSegment"/>
  <rMaterial name="materials:C_C_InnerInnerRing"/>
 </LogicalPart>
  
 <LogicalPart name="PixelForwardInnerDiskOuterRingSegment" category="support">
  <rSolid name="PixelForwardInnerDiskOuterRingSegment"/>
  <rMaterial name="materials:C_C_InnerOuterRing"/>
 </LogicalPart>

 <LogicalPart name="PixelForwardInnerDiskInnerRingCFSegment" category="support">
  <rSolid name="PixelForwardInnerDiskInnerRingCFSegment"/>
  <rMaterial name="materials:FPix_CFSkin_InnerInnerRing"/>
 </LogicalPart>
  
 <LogicalPart name="PixelForwardInnerDiskOuterRingCFSegment" category="support">
  <rSolid name="PixelForwardInnerDiskOuterRingCFSegment"/>
  <rMaterial name="materials:FPix_CFSkin_InnerOuterRing"/>
 </LogicalPart>

</LogicalPartSection>


<PosPartSection label="Rings">
</PosPartSection>

<Algorithm name="track:DDPixFwdSupportRing">
  <rParent name="pixfwdInnerDiskSupportRings:PixelForwardInnerDiskInnerRing"/>
  <String  name="Child1Name"       value="pixfwdInnerDiskSupportRings:PixelForwardInnerDiskInnerRingSegment"/>
  <String  name="Child2Name"       value="pixfwdInnerDiskSupportRings:PixelForwardInnerDiskInnerRingCFSegment"/>
  <Numeric name="StartCopyNo"      value="0"/>
  <Numeric name="Count"            value="[InnerRingTubsCount]"/>
  <Numeric name="AnchorZ"          value="13.5*mm"/> <!-- Chosen to make ZPos range symmetric -->
  <Vector name="Angle" type="numeric" nEntries="5">
    33.862*deg, 54.629*deg, 74.862*deg, 112.862*deg, 154.862*deg
  </Vector>
  <Vector name="ZPos" type="numeric" nEntries="5">
    -8.0*mm, -16.0*mm, -15.0*mm, -6.0*mm, -21.0*mm
  </Vector>
  <Numeric name="CreateBothHalves" value="1"/>
  <String  name="RotationName"    value="pixfwdInnerDiskSupportRings:InnerRingSegment"/>
</Algorithm>

<Algorithm name="track:DDPixFwdSupportRing">
  <rParent name="pixfwdInnerDiskSupportRings:PixelForwardInnerDiskOuterRing"/>
  <String  name="Child1Name"       value="pixfwdInnerDiskSupportRings:PixelForwardInnerDiskOuterRingSegment"/>
  <String  name="Child2Name"       value="pixfwdInnerDiskSupportRings:PixelForwardInnerDiskOuterRingCFSegment"/>
  <Numeric name="StartCopyNo"      value="0"/>
  <Numeric name="Count"            value="[OuterRingTubsCount]"/>
  <Numeric name="AnchorZ"          value="-0.084*mm"/> <!-- Chosen to make ZPos range symmetric -->
  <Vector name="Angle" type="numeric" nEntries="7">
    5.0*deg, 20.0*deg, 60.0*deg, 80.0*deg, 103.0*deg, 110.0*deg, 175.0*deg
  </Vector>
  <Vector name="ZPos" type="numeric" nEntries="7">
    9.234*mm, 8.666*mm, -1.560*mm, -3.052*mm, 9.023*mm, 9.278*mm, -9.120*mm
  </Vector>
  <Numeric name="CreateBothHalves" value="1"/>
  <String  name="RotationName"    value="pixfwdInnerDiskSupportRings:OuterRingSegment"/>
</Algorithm>
</DDDefinition>
